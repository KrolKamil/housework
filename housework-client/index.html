<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Client</title>
    <style>
        body{
            background-color: grey;
        }
    </style>
</head>
<body>
    
    <script>
    const token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVlMDIzZmEwYWE2MTk3MmY3ODJhYjQ5NSIsImlhdCI6MTU3NzI2OTM1OX0.YKoCEqEroRZBSdWy4cBq-tNUtfpSGk2f3yFXnmaY2hQ';
    const messageToSend = JSON.stringify({type: 'auth', payload: {token: token}});
    const createTask = JSON.stringify({type: 'task_add', payload: {token: token, title:'Test', description: 'test'}});
    console.log(messageToSend);
    const socket = new WebSocket('ws://localhost:3000');
    socket.addEventListener('open', () => {
        socket.addEventListener('message', (message) => {
            console.log(message.data);
        });
        socket.send(messageToSend);
        socket.send(createTask);
    });
    socket.addEventListener('close', () => {
        console.log('closed');
    })
    </script>
</body>
</html>